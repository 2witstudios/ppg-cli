<UserControl x:Class="PPGDesktop.Views.HomeDashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="{StaticResource ContentBackgroundBrush}">

    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="24,20">
        <StackPanel MaxWidth="900">

            <!-- Title -->
            <TextBlock Text="Dashboard" FontSize="24" FontWeight="Bold"
                       Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,20" />

            <!-- Stats Cards -->
            <UniformGrid Rows="1" Columns="4" Margin="0,0,0,24">
                <!-- Running -->
                <Border Background="{StaticResource CardBackgroundBrush}" CornerRadius="8"
                        Margin="0,0,8,0" Padding="16,12">
                    <StackPanel>
                        <TextBlock Text="RUNNING" FontSize="11" FontWeight="SemiBold"
                                   Foreground="{StaticResource MutedForegroundBrush}" />
                        <TextBlock Text="{Binding RunningCount}" FontSize="32" FontWeight="Bold"
                                   Foreground="#34d399" Margin="0,4,0,0" />
                    </StackPanel>
                </Border>

                <!-- Completed -->
                <Border Background="{StaticResource CardBackgroundBrush}" CornerRadius="8"
                        Margin="4,0" Padding="16,12">
                    <StackPanel>
                        <TextBlock Text="COMPLETED" FontSize="11" FontWeight="SemiBold"
                                   Foreground="{StaticResource MutedForegroundBrush}" />
                        <TextBlock Text="{Binding CompletedCount}" FontSize="32" FontWeight="Bold"
                                   Foreground="#60a5fa" Margin="0,4,0,0" />
                    </StackPanel>
                </Border>

                <!-- Failed -->
                <Border Background="{StaticResource CardBackgroundBrush}" CornerRadius="8"
                        Margin="4,0" Padding="16,12">
                    <StackPanel>
                        <TextBlock Text="FAILED" FontSize="11" FontWeight="SemiBold"
                                   Foreground="{StaticResource MutedForegroundBrush}" />
                        <TextBlock Text="{Binding FailedCount}" FontSize="32" FontWeight="Bold"
                                   Foreground="#f87171" Margin="0,4,0,0" />
                    </StackPanel>
                </Border>

                <!-- Worktrees -->
                <Border Background="{StaticResource CardBackgroundBrush}" CornerRadius="8"
                        Margin="8,0,0,0" Padding="16,12">
                    <StackPanel>
                        <TextBlock Text="WORKTREES" FontSize="11" FontWeight="SemiBold"
                                   Foreground="{StaticResource MutedForegroundBrush}" />
                        <TextBlock Text="{Binding TotalWorktrees}" FontSize="32" FontWeight="Bold"
                                   Foreground="#a78bfa" Margin="0,4,0,0" />
                    </StackPanel>
                </Border>
            </UniformGrid>

            <!-- Commit Heatmap -->
            <Border Background="{StaticResource CardBackgroundBrush}" CornerRadius="8"
                    Padding="20,16" Margin="0,0,0,24">
                <StackPanel>
                    <TextBlock Text="Commit Activity" FontSize="14" FontWeight="SemiBold"
                               Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,12" />
                    <Canvas x:Name="HeatmapCanvas" Height="112" />

                    <!-- Legend -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
                        <TextBlock Text="Less" FontSize="10"
                                   Foreground="{StaticResource MutedForegroundBrush}" Margin="0,0,4,0" />
                        <Rectangle Width="12" Height="12" Fill="#ebedf0" RadiusX="2" RadiusY="2" Margin="1" />
                        <Rectangle Width="12" Height="12" Fill="#9be9a8" RadiusX="2" RadiusY="2" Margin="1" />
                        <Rectangle Width="12" Height="12" Fill="#40c463" RadiusX="2" RadiusY="2" Margin="1" />
                        <Rectangle Width="12" Height="12" Fill="#30a14e" RadiusX="2" RadiusY="2" Margin="1" />
                        <Rectangle Width="12" Height="12" Fill="#216e39" RadiusX="2" RadiusY="2" Margin="1" />
                        <TextBlock Text="More" FontSize="10"
                                   Foreground="{StaticResource MutedForegroundBrush}" Margin="4,0,0,0" />
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Connection Status -->
            <Border Background="{StaticResource CardBackgroundBrush}" CornerRadius="8"
                    Padding="20,16">
                <StackPanel>
                    <TextBlock Text="Connection" FontSize="14" FontWeight="SemiBold"
                               Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,8" />
                    <StackPanel Orientation="Horizontal">
                        <Ellipse Width="10" Height="10" Margin="0,0,8,0" VerticalAlignment="Center">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <Setter Property="Fill" Value="#9ca3af" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding ConnectionStatus}" Value="connected">
                                            <Setter Property="Fill" Value="#34d399" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>
                        <TextBlock Text="{Binding ConnectionStatus}" FontSize="14"
                                   Foreground="{StaticResource ForegroundBrush}" />
                    </StackPanel>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
